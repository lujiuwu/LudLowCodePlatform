(function(){"use strict";var e={9160:function(e,t,o){var n={};o.r(n);var l={};o.r(l);var a={};o.r(a);var r={};o.r(r);var s={};o.r(s);var u=o(6763),i=(o(9398),o(2606));const c={id:"app",class:"min-h-screen bg-gray-50"};function d(e,t,o,n,l,a){const r=(0,i.g2)("PageEditor");return(0,i.uX)(),(0,i.CE)("div",c,[t[1]||(t[1]=(0,i.Fv)('<div class="p-4 mb-4 bg-white shadow-md"><h1 class="text-2xl font-bold text-primary mb-2">UnoCSS 测试</h1><div class="flex gap-4 mb-4"><button class="btn btn-primary">主要按钮</button><button class="btn btn-secondary">次要按钮</button></div><div class="card"><p class="text-gray-600">这是一个卡片组件，使用了UnoCSS样式</p></div></div>',1)),(0,i.bF)(r,{modelValue:n.state,"onUpdate:modelValue":t[0]||(t[0]=e=>n.state=e),formData:n.formData},null,8,["modelValue","formData"])])}o(3239),o(3325);var p=o(4982),b=o(1558),f=o(5554),v=((0,i.pM)({props:{block:{type:Object},component:{type:Object}},setup(e,t){const o=(0,i.EW)({get(){return e.block},set(e){t.emit("update:block",e)}});let n={};function l(e){let{clientX:t,clientY:l}=e;const{startX:a,startY:r,startWidth:s,startHeight:u,direction:i,startTop:c,startLeft:d}=n;"center"===i.horizontal&&(t=a),"center"===i.vertical&&(l=r);let p=t-a,b=l-r;"start"===i.vertical&&(b=-b,o.value.top=c-b),"start"===i.horizontal&&(p=-p,o.value.left=d-p);const f=s+p,v=u+b;o.value.width=f,o.value.height=v,o.value.hasResize=!0}function a(){document.body.removeEventListener("mousemove",l),document.body.removeEventListener("mouseup",a)}function r(t,o){t.stopPropagation(),n={startX:t.clientX,startY:t.clientY,startWidth:e.block.width,startHeight:e.block.height,startTop:e.block.top,startLeft:e.block.left,direction:o},document.body.addEventListener("mousemove",l),document.body.addEventListener("mouseup",a)}const{width:s,height:u}=e.component.resize||{};return()=>(0,i.bF)(i.FK,null,[s&&(0,i.bF)(i.FK,null,[(0,i.bF)("div",{class:"block-resize block-resize-left",onMousedown:e=>r(e,{horizontal:"start",vertical:"center"})},null),(0,i.bF)("div",{class:"block-resize block-resize-right",onMousedown:e=>r(e,{horizontal:"end",vertical:"center"})},null)]),u&&(0,i.bF)(i.FK,null,[(0,i.bF)("div",{class:"block-resize block-resize-top",onMousedown:e=>r(e,{horizontal:"center",vertical:"start"})},null),(0,i.bF)("div",{class:"block-resize block-resize-bottom",onMousedown:e=>r(e,{horizontal:"center",vertical:"end"})},null)]),s&&u&&(0,i.bF)(i.FK,null,[(0,i.bF)("div",{class:"block-resize block-resize-top-left",onMousedown:e=>r(e,{horizontal:"start",vertical:"start"})},null),(0,i.bF)("div",{class:"block-resize block-resize-top-right",onMousedown:e=>r(e,{horizontal:"end",vertical:"start"})},null),(0,i.bF)("div",{class:"block-resize block-resize-bottom-left",onMousedown:e=>r(e,{horizontal:"start",vertical:"end"})},null),(0,i.bF)("div",{class:"block-resize block-resize-bottom-right",onMousedown:e=>r(e,{horizontal:"end",vertical:"end"})},null)])])}}),o(2472)),m=(0,i.pM)({props:{btnInfo:{type:Object}},setup(e){return()=>(0,i.bF)(v.uD,{span:2,onClick:e.btnInfo.handler},{default:()=>["function"===typeof e.btnInfo.label?e.btnInfo.label():e.btnInfo.label]})}}),h=o(1507),g=o(3792),y=o(1927);function k(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,i.vv)(e)}var w=(0,i.pM)({props:{currentTab:{type:String},isOpenAside:{type:Boolean}},setup(e,t){const o=(0,i.EW)({get(){return e.currentTab},set(e){t.emit("update:currentTab",e)}}),n=(0,i.EW)({get(){return e.isOpenAside},set(e){t.emit("update:isOpenAside",e)}}),l=[{label:"基础组件",name:"basicComponent",icon:()=>(0,i.bF)(h.vdG,null,null)},{label:"布局容器",name:"pageContainer",icon:()=>(0,i.bF)(h.W1t,null,null)},{label:"反馈组件",name:"feedBack",icon:()=>(0,i.bF)(h.MFV,null,null)}];function a(e){o.value=l[e].name}function r(){n.value=!n.value,console.log(n.value)}return()=>{let e;return(0,i.bF)(i.FK,null,[(0,i.bF)("div",{class:"tabs-area"},[(0,i.bF)(g.q,{"tab-position":"left",onTabChange:a},k(e=l.map(e=>{let t;return(0,i.bF)(g.v$,{key:e.name,label:(0,i.bF)("div",{style:{display:"flex",alignItems:"center",gap:"4px",boxSizing:"border-box"}},[(0,i.bF)(y.tk,null,k(t=e.icon())?t:{default:()=>[t]}),(0,i.bF)("span",null,[e.label])])},null)}))?e:{default:()=>[e]})]),(0,i.bF)("div",{class:"icon-area"},[(0,i.bF)(y.tk,{onClick:r,size:"25"},{default:()=>[(0,i.bo)((0,i.bF)(h.avL,null,null),[[u.aG,n.value]]),(0,i.bo)((0,i.bF)(h.JaO,null,null),[[u.aG,!n.value]])]})])])}}}),F=o(9685),x=o(6053),_=o(5120),S=o(5857);(0,i.pM)({name:"DialogComponent",props:{option:{type:Object}},setup(e,t){const o=(0,p.Kh)({option:{...e.option,content:e.option.content||""},isShow:!1});t.expose({showDialog(e){o.option={...e,content:e.content||""},o.isShow=!0}});const n={minRows:5,maxRows:10};function l(){o.option.onConfirm&&o.option.onConfirm(o.option.content),o.isShow=!1}function a(){o.isShow=!1}function r(){navigator.clipboard.writeText(o.option.content).then(()=>F.nk.success("已复制到剪贴板")).catch(e=>F.nk.error("复制失败: "+e.message))}return()=>(0,i.bF)(x.kZ,{modelValue:o.isShow,"onUpdate:modelValue":e=>o.isShow=e,title:o.option.title},{default:()=>(0,i.bF)(_.WK,{type:"textarea",modelValue:o.option.content,"onUpdate:modelValue":e=>o.option.content=e,placeholder:"请输入json内容",autosize:n},null),footer:()=>(0,i.bF)("div",{class:"dialog-footer"},[o.option.footer?(0,i.bF)(i.FK,null,[(0,i.bF)(S.S2,{type:"primary",onClick:l},{default:()=>[(0,i.eW)("确认")]}),(0,i.bF)(S.S2,{onClick:a},{default:()=>[(0,i.eW)("取消")]})]):(0,i.bF)(i.FK,null,[(0,i.bF)(S.S2,{type:"primary",onClick:r},{default:()=>[(0,i.eW)("复制")]}),(0,i.bF)(S.S2,{onClick:a},{default:()=>[(0,i.eW)("关闭")]})])])})}});(0,i.pM)({props:{label:String},setup(e){const t=(0,i.WQ)("hideDropdown");return()=>(0,i.bF)("div",{class:"dropdown-item",onClick:t},[(0,i.bF)("span",null,[e.label])])}}),(0,i.pM)({name:"DropDownComponent",props:{option:{type:Object}},setup(e,t){const o=(0,p.Kh)({option:e.option,isShow:!1,top:0,left:0});t.expose({showDropDown(e){o.option=e,o.isShow=!0;const{top:t,left:n,height:l}=e.el.getBoundingClientRect();o.top=t+l,o.left=n}}),(0,i.Gt)("hideDropdown",()=>{o.isShow=!1});const n=(0,i.EW)(()=>["dropdown",{"isShow-dropdown":o.isShow}]),l=(0,i.EW)(()=>({top:o.top+"px",left:o.left+"px"}));function a(e){r.value.contains(e.target)||(o.isShow=!1)}(0,i.sV)(()=>{document.body.addEventListener("mousedown",a,!0)}),(0,i.xo)(()=>{document.body.removeEventListener("mousedown",a)});const r=(0,p.KR)(null);return()=>(0,i.bF)("div",{class:n.value,style:l.value,ref:r},[o.option.content()])}});o(5786);var O=o(797);(0,i.pM)({name:"TableDialogComponent",props:{option:{type:Object}},setup(e,t){const o=(0,p.Kh)({option:e.option,isShow:!1,editData:[]});function n(){o.editData.push({})}function l(){o.option.confirm(o.editData),o.isShow=!1}function a(){o.isShow=!1}return t.expose({showTableDialog(e){o.option=e,o.isShow=!0,o.editData=JSON.parse(JSON.stringify(e.data))}}),()=>(0,i.bF)(x.kZ,{modelValue:o.isShow,"onUpdate:modelValue":e=>o.isShow=e,title:"添加下拉选项"},{default:()=>(0,i.bF)("div",null,[(0,i.bF)("div",{class:"button-area"},[(0,i.bF)(S.S2,{type:"primary",onClick:n},{default:()=>[(0,i.eW)("添加")]}),(0,i.bF)(S.S2,null,{default:()=>[(0,i.eW)("重置")]})]),(0,i.bF)(O.Up,{data:o.editData},{default:()=>[(0,i.bF)(O.o8,{type:"index"},null),o.option.config.table.options.map((e,t)=>(0,i.bF)(O.o8,{label:e.label},{default:({row:t})=>(0,i.bF)(_.WK,{modelValue:t[e.field],"onUpdate:modelValue":o=>t[e.field]=o},null)})),(0,i.bF)(O.o8,null,{default:()=>[(0,i.bF)(S.S2,{type:"danger"},{default:()=>[(0,i.eW)("删除")]})]})]})]),footer:()=>(0,i.bF)("div",null,[(0,i.bF)(S.S2,{type:"primary",onClick:l},{default:()=>[(0,i.eW)("确定")]}),(0,i.bF)(S.S2,{onClick:a},{default:()=>[(0,i.eW)("取消")]})])})}});var D=o(3321),z=((0,i.pM)({props:{propConfig:{type:Object},modelValue:{type:Array}},emits:["update:modelValue"],setup(e,t){const o=(0,i.EW)({get(){return e.modelValue||[]},set(e){t.emit("update:modelValue",JSON.parse(JSON.stringify(e)))}});function n(){(0,r.$tableDialog)({config:e.propConfig,data:o.value,confirm(e){o.value=e}})}return()=>(0,i.bF)("div",null,[(!o.value||0===o.value.length)&&(0,i.bF)(S.S2,{onClick:n},{default:()=>[(0,i.eW)("添加")]}),(o.value||[]).map(t=>(0,i.bF)(D.u,null,{default:()=>[t[e.propConfig.table.key]]}))])}}),o(8340));function E(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,i.vv)(e)}var C=(0,i.pM)({setup(){function e(e){window.document.documentElement.setAttribute("data-skin",e)}const t=[{value:"default-theme",label:"默认主题"},{value:"dark-theme",label:"暗色主题"},{value:"candy-theme",label:"柔和主题"}],o=(0,p.KR)("default-theme");return()=>{let n;return(0,i.bF)(v.uD,{span:3,offset:3},{default:()=>[(0,i.bF)(z.AV,{modelValue:o.value,"onUpdate:modelValue":e=>o.value=e,onChange:e},E(n=t.map((e,t)=>(0,i.bF)(z.P9,{key:t,value:e.value,label:e.label,disabled:e.value===o.value},null)))?n:{default:()=>[n]})]})}}}),W=(o(2917),(0,i.pM)({props:{block:{type:Object},formData:{type:Object}},setup(e,t){const o=(0,i.EW)({get:()=>e.block,set:e=>{t.emit("update:block",e)}}),l=(0,i.EW)({get:()=>e.formData,set:e=>{t.emit("update:formData",e)}}),a=(0,i.WQ)("config"),r=(0,i.EW)(()=>({top:o.value.top+"px",left:o.value.left+"px",zIndex:o.value.zIndex})),s=(0,p.KR)(null);return(0,i.sV)(()=>{const{offsetWidth:e,offsetHeight:t}=s.value;o.value.alignCenter&&(o.value.left=o.value.left-e/2,o.value.top=o.value.top-t/2,o.value.alignCenter=!1),o.value.width=e,o.value.height=t}),()=>{const t=a.componentMap.get(o.value.key);if(!t)return null;const u={size:e.block.hasResize?{width:e.block.width,height:e.block.height}:{},props:e.block.props,model:Object.keys(t.model||{}).reduce((e,t)=>{const n=o.value.model[t];return e[t]={modelValue:l.value[n],"onUpdate:modelValue":e=>{l.value[n]=e}},e},{})},c=t.render(u),{width:d,height:p}=t.resize||{};return(0,i.bF)("div",{draggable:!0,ref:s,style:r.value},[c,e.block.focus&&(d||p)&&(0,i.bF)(n["default"],{class:"block-resize",block:e.block,component:t},null)])}}})),M=o(9646),V=o(2197),j=o(1589);function L(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,i.vv)(e)}var B=(0,i.pM)({props:{block:{type:Object},data:{type:Object},updateContainer:{type:Function},updateBlock:{type:Function}},setup(e){const t=(0,i.WQ)("config"),o=(0,p.Kh)({editData:{}}),n=()=>{e.block?o.editData=JSON.parse(JSON.stringify(e.block)):o.editData=JSON.parse(JSON.stringify(e.data.container))};function l(){e.block?e.updateBlock(o.editData,e.block):e.updateContainer({...e.data,container:o.editData})}return(0,i.wB)(()=>e.block,n,{immediate:!0}),()=>{const a=[];if(e.block){const n=t.componentMap.get(e.block.key);n&&n.props&&a.push(Object.entries(n.props).map(([e,t])=>(0,i.bF)(M.xE,null,{default:()=>[(0,i.bF)("span",{class:"label"},[t.label]),{input:()=>(0,i.bF)(_.WK,{modelValue:o.editData.props[e],"onUpdate:modelValue":t=>o.editData.props[e]=t},null),color:()=>(0,i.bF)(j.rF,{modelValue:o.editData.props[e],"onUpdate:modelValue":t=>o.editData.props[e]=t},null),selector:()=>{let n;return(0,i.bF)(z.AV,{modelValue:o.editData.props[e],"onUpdate:modelValue":t=>o.editData.props[e]=t},L(n=t.options.map(e=>(0,i.bF)(z.P9,{label:e.label,value:e.value},null)))?n:{default:()=>[n]})},table:()=>(0,i.bF)(s["default"],{propConfig:t,modelValue:o.editData.props[e],"onUpdate:modelValue":t=>o.editData.props[e]=t},{default:()=>[(0,i.eW)("s")]})}[t.type]()]}))),n&&n.model&&a.push(Object.entries(n.model).map(([e,t])=>(0,i.bF)(M.xE,{label:t},{default:()=>[(0,i.bF)(_.WK,{modelValue:o.editData.model[e],"onUpdate:modelValue":t=>o.editData.model[e]=t},null)]})))}else a.push((0,i.bF)(M.xE,null,{default:()=>[(0,i.bF)("span",{class:"label"},[(0,i.eW)("容器宽度")]),(0,i.bF)(V.lq,{modelValue:o.editData.width,"onUpdate:modelValue":e=>o.editData.width=e,step:5},null)]})),a.push((0,i.bF)(M.xE,null,{default:()=>[(0,i.bF)("span",{class:"label"},[(0,i.eW)("容器高度")]),(0,i.bF)(V.lq,{modelValue:o.editData.height,"onUpdate:modelValue":e=>o.editData.height=e,step:5},null)]}));return(0,i.bF)(M.US,{labelPosition:"top"},{default:()=>[a,(0,i.bF)(M.xE,null,{default:()=>[(0,i.bF)(S.S2,{type:"primary",onClick:()=>l()},{default:()=>[(0,i.eW)("应用")]}),(0,i.bF)(S.S2,{onClick:n},{default:()=>[(0,i.eW)("重置")]})]})]})}}}),K=o(4265);const T=(0,K.A)();function I(e,t){let o=null;function n(e){e.dataTransfer.dropEffect="move"}function l(e){e.preventDefault()}function a(e){e.dataTransfer.dropEffect="none"}function r(e){t.value={...t.value,blocks:t.value.blocks.concat([{top:e.offsetY,left:e.offsetX,key:o.key,zIndex:1,alignCenter:!0,props:{},model:{}}])},o=null}function s(t,s){const i=s.preview(),c=document.createElement("div");c.style.position="absolute",c.style.top="-9999px",document.body.appendChild(c),(0,u.XX)(i,c);const d=c.firstElementChild;d&&(d.style.opacity="0.7",d.style.pointerEvents="none",t.dataTransfer.setDragImage(d,0,0)),t.dataTransfer.setData("component",JSON.stringify(s)),e.value?.addEventListener("dragenter",n),e.value?.addEventListener("dragover",l),e.value?.addEventListener("dragleave",a),e.value?.addEventListener("drop",r),o=s,T.emit("start");const p=()=>{(0,u.XX)(null,c),document.body.removeChild(c)};setTimeout(p,0)}function i(t,o){e.value.removeEventListener("dragenter",n),e.value.removeEventListener("dragover",l),e.value.removeEventListener("dragleave",a),e.value.removeEventListener("drop",r),T.emit("end")}return{DragFunction:s,DragEndFunction:i}}o(6332);function U(e,t,o,n){const l=(0,p.KR)(-1),a=(0,i.EW)(()=>e.value.blocks[l.value]);function r(){e.value.blocks.forEach(e=>{e.focus=!1})}function s(e,o,a){t.value||(e.preventDefault(),e.stopPropagation(),e.shiftKey?u.value.focusBlocks.length<=1?o.focus=!0:o.focus=!o.focus:(r(),o.focus?o.focus=!1:o.focus=!0),l.value=a,n(e))}const u=(0,i.EW)(()=>{const t=[],o=[];return e.value.blocks.forEach(e=>{e.focus?t.push(e):o.push(e)}),{focusBlocks:t,unfocusBlocks:o}});function c(){o.value||(o.value=!0),t.value||(r(),l.value=-1)}return{BlockMouseDown:s,BlocksObj:u,OuterMouseDown:c,LastSelectedBlock:a,ClearBlockFocus:r}}function J(e,t,o){const n={startX:0,startY:0,dragging:!1},l=(0,p.Kh)({x:null,y:null});function a(t){let{clientX:o,clientY:a}=t;n.dragging||(n.dragging=!0,T.emit("start"));const r=o-n.startX+n.startLeft,s=a-n.startY+n.startTop;let u=s+t.target.offsetHeight/2,i=r+t.target.offsetWidth/2;for(let e=0;e<n.lines.y.length;e++){const{top:t,showTop:o}=n.lines.y[e];if(Math.abs(t-s)<5){u=o,a=n.startY-n.startTop+t;break}}for(let e=0;e<n.lines.x.length;e++){const{left:t,showLeft:l}=n.lines.x[e];if(Math.abs(t-r)<5){i=l,o=n.startX-n.startLeft+t;break}}l.x=i,l.y=u;const c=o-n.startX,d=a-n.startY;e.value.focusBlocks.forEach((e,t)=>{e.top=n.startPos[t].top+d,e.left=n.startPos[t].left+c})}function r(e){document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",r),n.dragging&&T.emit("end"),l.x=null,l.y=null}function s(l){const{width:s,height:u}=t.value;n.dragging=!1,n.startX=l.clientX,n.startY=l.clientY,n.startPos=e.value.focusBlocks.map(({top:e,left:t})=>({top:e,left:t})),n.startLeft=t.value.left,n.startTop=t.value.top,n.lines=(()=>{const{unfocusBlocks:t}=e.value,n={x:[],y:[]},l=[...t,{top:0,left:0,width:o.value.width,hight:o.value.height}];return l.forEach(e=>{const{top:t,left:o,width:l,height:a}=e;n.y.push({showTop:t,top:t}),n.y.push({showTop:t,top:t-u}),n.y.push({showTop:t+a/2,top:t+a/2-u/2}),n.y.push({showTop:t+a,top:t+a}),n.y.push({showTop:t+a,top:t+a-u}),n.x.push({showLeft:o,left:o}),n.x.push({showTop:o+l/2,top:o+l/2-s/2}),n.x.push({showLeft:o+l,left:o+l}),n.x.push({showLeft:o+l,left:o+l-s}),n.x.push({showLeft:o,left:o-s})}),n})(),document.addEventListener("mousemove",a),document.addEventListener("mouseup",r)}return{InnerMouseDown:s,markLine:l}}function P(e){const t={current:-1,commandQueue:[],commandsMap:new Map,commandsArray:[],destroyList:[]},o=e=>{t.commandsArray.push(e),t.commandsMap.set(e.name,(...o)=>{const{redo:n,undo:l}=e.execute(...o);if(n(),!e.isPushQueue)return;let{commandQueue:a,current:r}=t;a.length>0&&(a=a.slice(0,r+1),t.commandQueue=a),a.push({redo:n,undo:l}),t.current=r+1})};function n(){const e={90:"z",89:"y"},o=o=>{const{ctrlKey:n,keyCode:l}=o;let a=[];n&&a.push("ctrl"),a.push(e[l]),a=a.join("+"),t.commandsArray.forEach(({keyboard:e,name:n})=>{e&&e===a&&(t.commandsMap.get(n)(),o.preventDefault())})},n=()=>(window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)});return n}return o({name:"撤销",keyboard:"ctrl+z",execute:()=>({redo(){if(-1===t.current)return;const e=t.commandQueue[t.current];e&&(e.undo&&e.undo(),t.current--)}})}),o({name:"重做",keyboard:"ctrl+y",execute:()=>({redo(){const e=t.commandQueue[t.current+1];e&&(e.redo&&e.redo(),t.current++)}})}),o({name:"updateContainer",isPushQueue:!0,execute(t){const o={before:e.value,after:t};return{redo:()=>{e.value=o.after},undo:()=>{e.value=o.before}}}}),o({name:"updateBlock",isPushQueue:!0,execute(t,o){const n={before:e.value.blocks,after:(()=>{const n=[...e.value.blocks],l=e.value.blocks.indexOf(o);return l>-1&&n.splice(l,1,t),n})()};return{redo:()=>{e.value={...e.value,blocks:n.after}},undo:()=>{e.value={...e.value,blocks:n.before}}}}}),o({name:"drag",isPushQueue:!0,init(){this.before=null;const o=()=>{this.before=JSON.parse(JSON.stringify(e.value.blocks))},n=()=>t.commandsMap.get("drag")();return T.on("start",o),T.on("end",n),()=>{T.off("start",o),T.off("end",n)}},execute(){const t=this.before,o=JSON.parse(JSON.stringify(e.value.blocks));return{redo(){e.value.blocks=o},undo(){e.value.blocks=t}}}}),o({name:"toTop",isPushQueue:!0,execute(e){const{focusBlocks:t,unfocusBlocks:o}=e.value,n=o.reduce((e,t)=>Math.max(e,t.zIndex),-1/0),l=t.map(e=>e.zIndex);return t.forEach(e=>{e.zIndex=n+1}),{redo:()=>{t.forEach(e=>{e.zIndex=n+1})},undo:()=>{t.forEach((e,t)=>{e.zIndex=l[t]})}}}}),o({name:"toBottom",isPushQueue:!0,execute(e){const{focusBlocks:t,unfocusBlocks:o}=e.value,n=o.reduce((e,t)=>Math.min(e,t.zIndex),1/0),l=t.map(e=>e.zIndex);return t.forEach(e=>{e.zIndex=n-1}),{redo:()=>{t.forEach(e=>{e.zIndex=n-1})},undo:()=>{t.forEach((e,t)=>{e.zIndex=l[t]})}}}}),o({name:"delete",isPushQueue:!0,execute(t){const{unfocusBlocks:o}=t.value,n={before:JSON.parse(JSON.stringify(e.value.blocks)),after:o};return{redo:()=>{e.value.blocks=n.after},undo:()=>{e.value.blocks=n.before}}}}),(()=>{t.destroyList.push(n()),t.commandsArray.forEach(e=>e.init&&t.destroyList.push(e.init()))})(),(0,i.hi)(()=>{t.destroyList.forEach(e=>e&&e())}),t}var N=(0,i.pM)({props:{modelValue:{type:Object},formData:{type:Object}},setup(e,t){const o=(0,p.KR)(!1),n=(0,p.KR)(!0);function r(e,t){e.preventDefault(),(0,a.$dropdown)({el:e.target,content:()=>(0,i.bF)(i.FK,null,[(0,i.bF)(a.DropDownItem,{label:"删除",onClick:()=>{d.get("delete")(F)}},null),(0,i.bF)(a.DropDownItem,{label:"置顶",onClick:()=>{d.get("toTop")(F)}},null),(0,i.bF)(a.DropDownItem,{label:"置底",onClick:()=>{d.get("toBottom")(F)}},null),(0,i.bF)(a.DropDownItem,{label:"查看",onClick:()=>{(0,l.$dialog)({title:"查看",content:JSON.stringify(t),footer:!1})}},null),(0,i.bF)(a.DropDownItem,{label:"导入",onClick:()=>{(0,l.$dialog)({title:"导入",content:JSON.stringify(t),footer:!0,onConfirm:e=>{d.get("updateBlock")(JSON.parse(e),t)}})}},null)])})}const s=(0,i.EW)({get(){return e.modelValue},set(e){t.emit("update:modelValue",e)}}),c=(0,i.EW)(()=>({width:s.value.container.width+"px",height:s.value.container.height+"px"})),{commandsMap:d}=P(s),v=[{label:"撤销",handler:()=>d.get("撤销")()},{label:"重做",handler:()=>d.get("重做")()},{label:"导入",handler:()=>{(0,l.$dialog)({title:"导入json",content:"",footer:!0,onConfirm:e=>{const t=JSON.parse(e);d.get("updateContainer")(t)}})}},{label:"导出",handler:()=>{(0,l.$dialog)({title:"导出json",content:JSON.stringify(s.value),footer:!1})}},{label:"置顶",handler:()=>d.get("toTop")(F)},{label:"置底",handler:()=>d.get("toBottom")(F)},{label:"删除",handler:()=>d.get("delete")(F)},{label:()=>o.value?"编辑":"预览",handler:()=>{o.value=!o.value,S()}},{label:()=>n.value?"关闭":"打开",handler:()=>{n.value=!n.value}}],h=(0,p.KR)(null),{DragFunction:g,DragEndFunction:y}=I(h,s),{BlockMouseDown:k,BlocksObj:F,OuterMouseDown:x,LastSelectedBlock:_,ClearBlockFocus:S}=U(s,o,n,e=>{L(e)}),O=(0,p.KR)("basicComponent"),D=(0,i.EW)(()=>(console.log(O.value),(0,i.WQ)("config").componentList[O.value]||[])),z=(0,p.KR)(!0),E=(0,p.KR)(null),M=(0,p.KR)("280px"),V=(0,i.EW)(()=>E.value?E.value.offsetWidth+"px":"60px"),j=()=>{M.value=z.value?"280px":V.value};(0,i.sV)(()=>{j()});const{InnerMouseDown:L,markLine:K}=J(F,_,h);return()=>(0,i.bF)("div",{id:"pageEditor"},[(0,i.bF)(b.lX,{class:"outer-content main-color"},{default:()=>[(0,i.bo)((0,i.bF)(b.Mb,{style:{transition:"width 0.3s ease"},width:M.value,class:"outer-content__component-aside aside-color"},{default:()=>[(0,i.bF)("div",{class:"component-aside__row"},[(0,i.bF)("div",{class:"component-aside__row__tabs"},[(0,i.bF)(w,{currentTab:O.value,"onUpdate:currentTab":e=>O.value=e,isOpenAside:z.value,"onUpdate:isOpenAside":[e=>z.value=e,e=>{z.value=e,j()}]},null)]),(0,i.bF)(u.eB,{name:"slide"},{default:()=>[(0,i.bo)((0,i.bF)("div",{class:"component-aside__row__components"},[D.value.map(e=>(0,i.bF)("div",{class:"component-aside__row__components__item"},[(0,i.bF)("div",{class:"component-aside__row__components__item__component",draggable:!0,onDragstart:t=>g(t,e),onDragend:t=>y(t,e)},[e.preview()]),(0,i.bF)("div",{class:"component-aside__row__components__item__label"},[e.label])]))]),[[u.aG,z.value]])]})])]}),[[u.aG,n.value]]),(0,i.bF)(b.lX,{class:"inner-content box-color"},{default:()=>[(0,i.bo)((0,i.bF)(b.bZ,{class:"inner-content__header",height:"45px"},{default:()=>[(0,i.bF)(f.S2,{class:"inner-content__header__menu"},{default:()=>[v.map(e=>(0,i.bF)(m,{class:"inner-content__header__menu__btn",btnInfo:e},null)),(0,i.bF)(C,{class:"inner-content__header__theme-select"},null)]})]}),[[u.aG,n.value]]),(0,i.bF)(b.ZO,null,{default:()=>[(0,i.bF)("div",{class:"inner-content__main",style:c.value,ref:h,onMousedown:x},[s.value.blocks.map((t,o)=>(0,i.bF)(W,{formData:e.formData,block:t,onMousedown:e=>k(e,t,o),class:["inner-content__main__block",t.focus?"inner-content__main__item--focus":"inner-content__main__item"],onContextmenu:e=>r(e,t)},null)),null!==K.x&&(0,i.bF)("div",{class:"inner-content__main__line-X",style:{left:K.x+"px"}},null),null!==K.y&&(0,i.bF)("div",{class:"inner-content__main__line-Y",style:{top:K.y+"px"}},null)])]})]}),(0,i.bo)((0,i.bF)(b.Mb,{width:"220px",class:"outer-content__operator-aside aside-color"},{default:()=>[(0,i.bF)(B,{class:"outer-content__operator-aside__form",block:_.value,data:s.value,"onUpdate:data":e=>s.value=e,updateContainer:d.get("updateContainer"),updateBlock:d.get("updateBlock")},null)]}),[[u.aG,n.value]])]})])}}),X=JSON.parse('{"container":{"width":900,"height":600},"blocks":[]}'),A=o(5610),R=o(995);function Q(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,i.vv)(e)}function Y(){const e={basicComponent:[],pageContainer:[],feedBack:[]},t=new Map;return{componentList:e,componentMap:t,register:o=>{"basic"===o.type?e.basicComponent.push(o):"page"===o.type?e.pageContainer.push(o):e.feedBack.push(o),t.set(o.key,o)}}}const G=Y(),$=e=>({type:"input",label:e}),Z=e=>({type:"color",label:e}),q=(e,t)=>({type:"selector",label:e,options:t}),H=(e,t)=>({type:"table",label:e,table:t});G.register({label:"文本",key:"text",type:"basic",preview:()=>(0,i.bF)("span",{class:"preview"},[(0,i.eW)("预览文本")]),render:e=>e&&0!==Object.keys(e.props).length?(0,i.bF)("span",{style:{color:e.props.color,fontSize:e.props.size+"px"}},[e.props.text]):(0,i.bF)("span",null,[(0,i.eW)("默认内容")]),props:{text:$("文本内容"),color:Z("文本颜色"),size:q("字体大小",[{label:"14px",value:"14px"},{label:"20px",value:"20px"}])}}),G.register({label:"按钮",text:"按钮",type:"basic",preview:()=>(0,i.bF)(S.S2,{class:"preview"},{default:()=>[(0,i.eW)("预览按钮")]}),render:e=>e&&0!==Object.keys(e.props).length?(0,i.bF)(S.S2,{style:0!==Object.keys(e.size).length?{height:e.size.height+"px",width:e.size.width+"px"}:{},type:e.props.type,size:e.props.size},{default:()=>[e.props.text]}):(0,i.bF)(S.S2,{style:0!==Object.keys(e.size).length?{height:e.size.height+"px",width:e.size.width+"px"}:{}},{default:()=>[(0,i.eW)("按钮大小")]}),key:"button",props:{text:$("按钮内容"),buttonType:q("按钮类型",[{label:"默认",value:"default"},{label:"基础",value:"primary"},{label:"成功",value:"success"},{label:"信息",value:"info"},{label:"警告",value:"warning"},{label:"危险",value:"danger"}]),buttonSize:q("按钮大小",[{label:"默认",value:"default"},{label:"大",value:"large"},{label:"小",value:"small"}])},resize:{width:!0,height:!0}}),G.register({label:"输入框",text:"输入框",type:"basic",preview:()=>(0,i.bF)(_.WK,{class:"preview",placeholder:"预览输入框"},null),render:e=>e?(0,i.bF)(_.WK,{placeholder:"默认内容",size:e.props?.size,modelValue:e.model?.default?.modelValue,"onUpdate:modelValue":e.model?.default?.["onUpdate:modelValue"]},null):(0,i.bF)(_.WK,{placeholder:"默认内容"},null),key:"input",model:{default:"绑定字段"},props:{size:q("输入框尺寸",[{label:"默认",value:"default"},{label:"大",value:"large"},{label:"小",value:"small"}])},resize:{width:!0}}),G.register({label:"下拉框",text:"下拉框",type:"basic",preview:()=>(0,i.bF)(z.AV,{class:"preview",placeholder:"请选择",style:"width: 100%"},null),render:e=>{if(e&&0!==Object.keys(e.props).length&&0!==Object.keys(e.model).length){let t;return(0,i.bF)(z.AV,(0,i.v6)(e.model.default,{style:"width: 240px",placeholder:"请选择"}),Q(t=(e.props.options||[]).map((e,t)=>{const o=String(e.value);return(0,i.bF)(z.P9,{key:t,label:e.label,value:o},null)}))?t:{default:()=>[t]})}return(0,i.bF)(z.AV,{style:"width: 240px",placeholder:"请选择"},null)},key:"selector",props:{options:H("下拉选项",{options:[{label:"显示值",field:"label"},{label:"绑定值",field:"value"}],key:"label"}),size:q("下拉框尺寸",[{label:"默认",value:"default"},{label:"大",value:"large"},{label:"小",value:"small"}])},model:{default:"绑定数据"}}),G.register({label:"开关",key:"switch",type:"basic",preview:()=>(0,i.bF)(A.qi,{class:"preview"},null),render:()=>(0,i.bF)(A.qi,null,null),props:{}}),G.register({label:"评分",type:"basic",key:"rate",preview:()=>(0,i.bF)(R.og,{class:"preview"},null),render:()=>(0,i.bF)(R.og,null,null),props:{}}),G.register({label:"头部",type:"page",preview:()=>(0,i.bF)(b.bZ,{style:{width:"100%",backgroundColor:"#ccd9e6"},height:"30px"},{default:()=>[(0,i.eW)("头部")]}),render:()=>(0,i.bF)(b.bZ,{style:{width:"900px",backgroundColor:"#ccd9e6"},height:"40px"},{default:()=>[(0,i.eW)("头部")]}),resize:{width:!0,height:!0}}),G.register({label:"侧边栏",type:"page",preview:()=>(0,i.bF)(b.Mb,{style:{height:"100%",backgroundColor:"#ccd9e6"},width:"100px"},{default:()=>[(0,i.eW)("侧边栏")]}),render:()=>(0,i.bF)(b.Mb,{style:{height:"900px",backgroundColor:"#ccd9e6"},width:"100px"},{default:()=>[(0,i.eW)("侧边栏")]}),resize:{width:!0,height:!0}});var ee={components:{PageEditor:N},setup(){const e=(0,p.KR)(X);(0,i.Gt)("config",G);const t=(0,p.KR)({username:"lujiuwu",password:"111"});return(0,i.sV)(()=>{window.document.documentElement.setAttribute("data-skin","default-theme")}),{state:e,formData:t}}},te=o(2744);const oe=(0,te.A)(ee,[["render",d]]);var ne=oe,le=o(515);const ae=[],re=(0,le.aE)({history:(0,le.Bt)(),routes:ae});var se=re,ue=o(6080),ie=(0,ue.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,u.Ef)(ne).use(ie).use(se).mount("#app")}},t={};function o(n){var l=t[n];if(void 0!==l)return l.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,n,l,a){if(!n){var r=1/0;for(c=0;c<e.length;c++){n=e[c][0],l=e[c][1],a=e[c][2];for(var s=!0,u=0;u<n.length;u++)(!1&a||r>=a)&&Object.keys(o.O).every(function(e){return o.O[e](n[u])})?n.splice(u--,1):(s=!1,a<r&&(r=a));if(s){e.splice(c--,1);var i=l();void 0!==i&&(t=i)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,l,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,a,r=n[0],s=n[1],u=n[2],i=0;if(r.some(function(t){return 0!==e[t]})){for(l in s)o.o(s,l)&&(o.m[l]=s[l]);if(u)var c=u(o)}for(t&&t(n);i<r.length;i++)a=r[i],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(c)},n=self["webpackChunklud"]=self["webpackChunklud"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],function(){return o(9160)});n=o.O(n)})();
//# sourceMappingURL=app.86fc31bc.js.map